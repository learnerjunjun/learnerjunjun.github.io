function waterfall(t){function e(t,e){return e=window.getComputedStyle(e),parseFloat(e["margin"+t])||0}function n(t){return t+"px"}function o(t){return parseFloat(t.style.left)}function r(t){return t.clientWidth}function l(t){return parseFloat(t.style.top)+t.clientHeight+e("Bottom",t)}function i(t){return o(t)+r(t)+e("Right",t)}function s(t){t.sort((function(t,e){return l(t)===l(e)?o(e)-o(t):l(e)-l(t)}))}function u(e){r(t)!=g&&(e.target.removeEventListener(e.type,arguments.callee),waterfall(t))}"string"==typeof t&&(t=document.querySelector(t));var a=[].map.call(t.children,(function(t){return t.style.position="absolute",t})),f=(t.style.position="relative",[]);a.length&&(a[0].style.top="0px",a[0].style.left=n(e("Left",a[0])),f.push(a[0]));for(var p=1;p<a.length;p++){var c=a[p-1],y=a[p];if(!(i(c)+r(y)<=r(t)))break;y.style.top=c.style.top,y.style.left=n(i(c)+e("Left",y)),f.push(y)}for(;p<a.length;p++){s(f);y=a[p];var d=f.pop();y.style.top=n(l(d)+e("Top",y)),y.style.left=n(o(d)),f.push(y)}s(f);var h=f[0],g=(t.style.height=n(l(h)+e("Bottom",h)),r(t));window.addEventListener?window.addEventListener("resize",u):document.body.onresize=u}